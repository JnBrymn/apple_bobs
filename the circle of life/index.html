<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>The Circle of Life - Choice Adventure</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Arial', sans-serif;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
            display: flex;
            justify-content: center;
            align-items: center;
            color: white;
        }

        .container {
            background: rgba(255, 255, 255, 0.1);
            backdrop-filter: blur(10px);
            border-radius: 20px;
            padding: 40px;
            box-shadow: 0 8px 32px rgba(0, 0, 0, 0.3);
            text-align: center;
            max-width: 700px;
            width: 90%;
        }

        h1 {
            font-size: 3em;
            margin-bottom: 20px;
            text-shadow: 2px 2px 4px rgba(0, 0, 0, 0.5);
            background: linear-gradient(45deg, #ff0000, #002fff);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
        }

        .screen {
            display: none;
        }

        .screen.active {
            display: block;
        }

        .gender-choice {
            display: flex;
            justify-content: center;
            gap: 20px;
            margin: 30px 0;
        }

        .gender-btn {
            padding: 20px 40px;
            font-size: 1.2em;
            border: none;
            border-radius: 15px;
            cursor: pointer;
            transition: all 0.3s ease;
            background: rgba(255, 255, 255, 0.2);
            color: white;
            backdrop-filter: blur(5px);
        }

        .gender-btn:hover {
            transform: translateY(-5px);
            box-shadow: 0 10px 20px rgba(0, 0, 0, 0.3);
        }

        .gender-btn.selected {
            background: linear-gradient(45deg, #ff6b6b, #4ecdc4);
            transform: scale(1.05);
        }

        .name-input {
            width: 100%;
            padding: 15px;
            font-size: 1.2em;
            border: none;
            border-radius: 10px;
            margin: 20px 0;
            background: rgba(255, 255, 255, 0.9);
            color: #333;
        }

        .name-suggestions {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(120px, 1fr));
            gap: 10px;
            margin: 20px 0;
        }

        .name-suggestion {
            padding: 10px;
            background: rgba(255, 255, 255, 0.2);
            border-radius: 8px;
            cursor: pointer;
            transition: all 0.3s ease;
        }

        .name-suggestion:hover {
            background: rgba(255, 255, 255, 0.3);
            transform: scale(1.05);
        }

        .btn {
            padding: 15px 30px;
            font-size: 1.1em;
            border: none;
            border-radius: 10px;
            cursor: pointer;
            background: linear-gradient(45deg, #ff6b6b, #4ecdc4);
            color: white;
            margin: 10px;
            transition: all 0.3s ease;
        }

        .btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.3);
        }

        .choice-btn {
            width: 100%;
            padding: 20px;
            font-size: 1.1em;
            border: none;
            border-radius: 15px;
            cursor: pointer;
            background: rgba(255, 255, 255, 0.2);
            color: white;
            margin: 10px 0;
            transition: all 0.3s ease;
            text-align: left;
            backdrop-filter: blur(5px);
        }

        .choice-btn:hover {
            background: rgba(255, 255, 255, 0.3);
            transform: translateX(10px);
        }

        .character-display {
            background: rgba(255, 255, 255, 0.1);
            border-radius: 15px;
            padding: 20px;
            margin: 20px 0;
        }

        .character-avatar {
            font-size: 4em;
            margin: 20px 0;
            image-rendering: pixelated;
            image-rendering: -moz-crisp-edges;
            image-rendering: crisp-edges;
        }

        .pixel-character {
            display: inline-block;
            width: 60px;
            height: 60px;
            background: #ffdbac;
            border: 2px solid #000;
            position: relative;
            margin: 20px 0;
            image-rendering: pixelated;
        }

        .pixel-character.baby {
            width: 50px;
            height: 50px;
            border-radius: 0;
        }

        .pixel-character.child {
            width: 55px;
            height: 55px;
            border-radius: 0;
        }

        .pixel-character.adult {
            width: 60px;
            height: 60px;
            border-radius: 0;
        }

        .pixel-character.old {
            width: 55px;
            height: 55px;
            border-radius: 0;
        }

        .pixel-eyes {
            position: absolute;
            top: 15px;
            width: 100%;
            display: flex;
            justify-content: space-around;
            padding: 0 10px;
        }

        .pixel-eye {
            width: 6px;
            height: 6px;
            background: #000;
            border-radius: 0;
        }

        .pixel-mouth {
            position: absolute;
            bottom: 12px;
            left: 50%;
            transform: translateX(-50%);
            width: 16px;
            height: 10px;
            background: #ff6b9d;
            border-radius: 0;
        }

        .pixel-mouth.small {
            width: 10px;
            height: 6px;
        }

        .pixel-mouth.large {
            width: 20px;
            height: 12px;
        }

        .pixel-hair {
            position: absolute;
            top: -3px;
            left: 50%;
            transform: translateX(-50%);
            width: 45px;
            height: 12px;
            background: #8b4513;
            border-radius: 0;
        }

        .pixel-hair.blonde {
            background: #f4d03f;
        }

        .pixel-hair.black {
            background: #000;
        }

        .pixel-hair.red {
            background: #e74c3c;
        }

        .pixel-hair.gray {
            background: #95a5a6;
        }

        .pixel-hair.white {
            background: #ecf0f1;
        }

        .pixel-nose {
            position: absolute;
            top: 28px;
            left: 50%;
            transform: translateX(-50%);
            width: 4px;
            height: 4px;
            background: #000;
            border-radius: 0;
        }

        .pixel-skull {
            position: relative;
            width: 60px;
            height: 60px;
            background: #fff;
            border: 2px solid #000;
            margin: 20px auto;
        }

        .skull-eye {
            position: absolute;
            top: 15px;
            width: 12px;
            height: 12px;
            background: #000;
            border-radius: 0;
        }

        .skull-eye.left {
            left: 10px;
        }

        .skull-eye.right {
            right: 10px;
        }

        .skull-nose {
            position: absolute;
            top: 32px;
            left: 50%;
            transform: translateX(-50%);
            width: 6px;
            height: 6px;
            background: #000;
            border-radius: 0;
        }

        .skull-teeth {
            position: absolute;
            bottom: 8px;
            left: 50%;
            transform: translateX(-50%);
            width: 30px;
            height: 12px;
            background: #fff;
            border: 2px solid #000;
            border-radius: 0;
        }

        .stats {
            display: grid;
            grid-template-columns: repeat(2, 1fr);
            gap: 15px;
            margin: 20px 0;
        }

        .stat {
            background: rgba(255, 255, 255, 0.1);
            padding: 15px;
            border-radius: 10px;
        }

        .life-events {
            max-height: 200px;
            overflow-y: auto;
            background: rgba(0, 0, 0, 0.2);
            border-radius: 10px;
            padding: 15px;
            margin: 20px 0;
            text-align: left;
        }

        .event {
            margin: 10px 0;
            padding: 10px;
            background: rgba(255, 255, 255, 0.1);
            border-radius: 8px;
            border-left: 4px solid #4ecdc4;
        }

        .age {
            font-size: 2em;
            font-weight: bold;
            color: #ff6b6b;
        }

        .progress-bar {
            width: 100%;
            height: 20px;
            background: rgba(255, 255, 255, 0.2);
            border-radius: 10px;
            overflow: hidden;
            margin: 10px 0;
        }

        .progress-fill {
            height: 100%;
            background: linear-gradient(45deg, #ff6b6b, #4ecdc4);
            transition: width 0.3s ease;
        }

        .story-text {
            font-size: 1.2em;
            line-height: 1.6;
            margin: 20px 0;
            background: rgba(0, 0, 0, 0.2);
            padding: 20px;
            border-radius: 15px;
        }

        .ending-screen {
            background: rgba(255, 255, 255, 0.1);
            border-radius: 15px;
            padding: 30px;
            margin: 20px 0;
        }

        .ending-title {
            font-size: 2.5em;
            margin-bottom: 20px;
            color: #ff6b6b;
        }

        .ending-description {
            font-size: 1.3em;
            line-height: 1.8;
            margin: 20px 0;
        }

        .life-summary {
            background: rgba(255, 255, 255, 0.1);
            border-radius: 10px;
            padding: 20px;
            margin: 20px 0;
            text-align: left;
        }
    </style>
</head>
<body>
    <div class="container">
        <!-- Welcome Screen -->
        <div id="welcome-screen" class="screen active">
            <h1>🌟 The Circle of Life 🌟</h1>
            <p>Welcome to your life journey! Every choice you make will shape your destiny and lead to different endings.</p>
            <button class="btn" onclick="startGame()">Begin Your Life</button>
        </div>

        <!-- Gender Selection Screen -->
        <div id="gender-screen" class="screen">
            <h1>👶 Choose Your Gender</h1>
            <p>Are you a boy or a girl?</p>
            <div class="gender-choice">
                <button class="gender-btn" onclick="selectGender('boy')">👦 Boy</button>
                <button class="gender-btn" onclick="selectGender('girl')">👧 Girl</button>
            </div>
        </div>

        <!-- Name Selection Screen -->
        <div id="name-screen" class="screen">
            <h1>📝 Choose Your Name</h1>
            <p>What should we call you?</p>
            <input type="text" id="name-input" class="name-input" placeholder="Type your name here..." maxlength="20">
            <p>Or pick from these cool names:</p>
            <div class="name-suggestions" id="name-suggestions"></div>
            <button class="btn" onclick="confirmName()">Continue</button>
        </div>

        <!-- Life Choice Screen -->
        <div id="life-screen" class="screen">
            <h1>🌍 Your Life Journey</h1>
            <div class="character-display">
                <div id="character-avatar-container">
                    <canvas id="character-canvas" width="240" height="240" style="image-rendering: pixelated; image-rendering: -moz-crisp-edges; image-rendering: crisp-edges; border: 4px solid #333; background: linear-gradient(135deg, #f8f8f8 0%, #e8e8e8 50%, #d8d8d8 100%); border-radius: 15px; box-shadow: 0 8px 16px rgba(0,0,0,0.4), inset 0 1px 0 rgba(255,255,255,0.3);"></canvas>
                    <div id="particle-container" style="position: absolute; top: 0; left: 0; width: 240px; height: 240px; pointer-events: none;"></div>
                </div>
                <h2 id="character-name">Name</h2>
                <div class="age" id="character-age">Age: 0</div>
            </div>
            
            <div class="stats">
                <div class="stat">
                    <h3>Health</h3>
                    <div class="progress-bar">
                        <div class="progress-fill" id="health-bar" style="width: 100%"></div>
                    </div>
                </div>
                <div class="stat">
                    <h3>Happiness</h3>
                    <div class="progress-bar">
                        <div class="progress-fill" id="happiness-bar" style="width: 100%"></div>
                    </div>
                </div>
                <div class="stat">
                    <h3>Intelligence</h3>
                    <div class="progress-fill" id="intelligence-bar" style="width: 50%"></div>
                </div>
                <div class="stat">
                    <h3>Strength</h3>
                    <div class="progress-fill" id="strength-bar" style="width: 30%"></div>
                </div>
            </div>

            <div class="story-text" id="story-text">
                🌟 You were born! Welcome to the world!
            </div>

            <div id="choices-container">
                <!-- Choices will be added here -->
            </div>

            <div class="life-events" id="life-events">
                <div class="event">🌟 You were born! Welcome to the world!</div>
            </div>
        </div>

        <!-- Ending Screen -->
        <div id="ending-screen" class="screen">
            <div class="ending-screen">
                <div class="ending-title" id="ending-title">Your Life Story</div>
                <div class="ending-description" id="ending-description">
                    Your life journey has come to an end. Here's what happened...
                </div>
                <div class="life-summary" id="life-summary">
                    <!-- Life summary will be added here -->
                </div>
                <button class="btn" onclick="restartGame()">Live Another Life</button>
            </div>
        </div>
    </div>

    <script>
        // Game state
        let gameState = {
            gender: null,
            name: '',
            age: 0,
            health: 100,
            happiness: 100,
            intelligence: 50,
            strength: 30,
            lifePath: [],
            choices: [],
            deathType: null
        };

        // Name suggestions
        const boyNames = ['Alex', 'Max', 'Sam', 'Jordan', 'Riley', 'Casey', 'Morgan', 'Taylor', 'Avery', 'Quinn', 'Blake', 'Drew', 'Cameron', 'Logan', 'Mason', 'Ethan', 'Noah', 'Liam', 'Oliver', 'Elijah'];
        const girlNames = ['Emma', 'Olivia', 'Ava', 'Isabella', 'Sophia', 'Charlotte', 'Mia', 'Amelia', 'Harper', 'Evelyn', 'Abigail', 'Emily', 'Elizabeth', 'Sofia', 'Madison', 'Avery', 'Ella', 'Scarlett', 'Grace', 'Chloe'];
        const neutralNames = ['River', 'Sky', 'Phoenix', 'Rowan', 'Sage', 'Indigo', 'Ocean', 'Storm', 'Rain', 'Winter', 'Autumn', 'Summer', 'Spring', 'Dawn', 'Dusk', 'Twilight', 'Zen', 'Peace', 'Hope', 'Joy'];

        // Life scenarios with choices
        const lifeScenarios = {
            0: {
                story: "🌟 You were born! Your parents are overjoyed. What kind of baby are you?",
                choices: [
                    { text: "😴 Quiet and peaceful - you sleep through the night", effects: { happiness: 10, health: 5 } },
                    { text: "😄 Happy and giggly - you love to smile at everyone", effects: { happiness: 15, health: 10 } },
                    { text: "🤔 Curious and alert - you observe everything around you", effects: { intelligence: 15, happiness: 5 } }
                ]
            },
            1: {
                story: "🎂 You're turning 1! Your parents want to celebrate. What do you want to do?",
                choices: [
                    { text: "🎈 Have a big party with lots of people", effects: { happiness: 20, health: -5 } },
                    { text: "🍰 Have a small family celebration", effects: { happiness: 15, health: 10 } },
                    { text: "🎁 Just play with your new toys quietly", effects: { happiness: 10, intelligence: 10 } }
                ]
            },
            2: {
                story: "🚶‍♂️ You're learning to walk! How do you approach this new skill?",
                choices: [
                    { text: "🏃‍♂️ Run everywhere - you're fearless!", effects: { strength: 15, health: -10 } },
                    { text: "🚶‍♂️ Take careful steps - you're cautious", effects: { health: 15, strength: 5 } },
                    { text: "🤔 Study how others walk first", effects: { intelligence: 15, strength: 5 } }
                ]
            },
            3: {
                story: "🎨 You're starting to show interests. What catches your attention?",
                choices: [
                    { text: "🎨 Art and drawing - you love colors!", effects: { happiness: 15, intelligence: 10 } },
                    { text: "📚 Books and stories - you want to read!", effects: { intelligence: 20, happiness: 5 } },
                    { text: "⚽ Sports and running - you're very active!", effects: { strength: 20, health: 10 } }
                ]
            },
            4: {
                story: "🏫 It's time to start preschool! How do you feel about meeting new friends?",
                choices: [
                    { text: "😊 Excited! You can't wait to make friends", effects: { happiness: 20, intelligence: 10 } },
                    { text: "😰 Nervous but you'll try your best", effects: { intelligence: 15, happiness: 5 } },
                    { text: "😤 You'd rather stay home and play alone", effects: { happiness: -10, intelligence: 5 } }
                ]
            },
            5: {
                story: "🎓 Kindergarten starts! What kind of student do you want to be?",
                choices: [
                    { text: "📖 Study hard and get good grades", effects: { intelligence: 25, happiness: 5 } },
                    { text: "🎮 Have fun and make lots of friends", effects: { happiness: 25, intelligence: 5 } },
                    { text: "🏃‍♂️ Focus on sports and being active", effects: { strength: 25, health: 10 } }
                ]
            },
            6: {
                story: "🏊‍♂️ Your parents want you to learn a new skill. What interests you?",
                choices: [
                    { text: "🏊‍♂️ Swimming - you love the water!", effects: { strength: 20, health: 15 } },
                    { text: "🎹 Music lessons - you want to play an instrument", effects: { intelligence: 20, happiness: 15 } },
                    { text: "🎨 Art classes - you love being creative", effects: { happiness: 20, intelligence: 10 } }
                ]
            },
            7: {
                story: "📚 You're reading chapter books now! What kind of stories do you love?",
                choices: [
                    { text: "🧙‍♂️ Fantasy and magic - dragons and wizards!", effects: { intelligence: 20, happiness: 15 } },
                    { text: "🔬 Science and space - how things work!", effects: { intelligence: 25, happiness: 10 } },
                    { text: "🏆 Adventure and heroes - exciting stories!", effects: { happiness: 20, strength: 10 } }
                ]
            },
            8: {
                story: "🎯 You're getting older and need to choose your main interest. What's your passion?",
                choices: [
                    { text: "🎨 Become an artist - you love creating", effects: { happiness: 25, intelligence: 10 } },
                    { text: "🔬 Become a scientist - you love learning", effects: { intelligence: 30, happiness: 5 } },
                    { text: "🏆 Become an athlete - you love sports", effects: { strength: 30, health: 15 } }
                ]
            },
            9: {
                story: "💻 Technology is everywhere! How do you want to use computers?",
                choices: [
                    { text: "🎮 Play video games and have fun", effects: { happiness: 20, intelligence: 5 } },
                    { text: "💻 Learn to code and build things", effects: { intelligence: 25, happiness: 10 } },
                    { text: "📱 Use them for school and learning", effects: { intelligence: 20, happiness: 5 } }
                ]
            },
            10: {
                story: "🎉 Double digits! You're growing up fast. What's your biggest dream?",
                choices: [
                    { text: "🌟 To be famous and well-known", effects: { happiness: 20, intelligence: 10 } },
                    { text: "💡 To invent something amazing", effects: { intelligence: 30, happiness: 10 } },
                    { text: "🏆 To be the best at something", effects: { strength: 25, happiness: 15 } }
                ]
            },
            11: {
                story: "🚗 You're crossing the street when you see a car speeding toward a little kid. What do you do?",
                choices: [
                    { text: "🦸‍♂️ Rush to save the child!", effects: { strength: 50, health: -100 }, death: "hero_death" },
                    { text: "📞 Call for help and stay safe", effects: { intelligence: 20, happiness: -10 } },
                    { text: "😱 Freeze in fear", effects: { health: -20, happiness: -30 } }
                ]
            },
            12: {
                story: "🏥 You're feeling very sick. The doctors say it's serious. How do you face this?",
                choices: [
                    { text: "💪 Fight with all your strength", effects: { health: 30, strength: 20 } },
                    { text: "😔 Give up hope", effects: { health: -50, happiness: -50 }, death: "illness" },
                    { text: "🩺 Trust the doctors completely", effects: { health: 20, intelligence: 15 } }
                ]
            },
            13: {
                story: "🌊 You're at the beach and see someone drowning far out. What do you do?",
                choices: [
                    { text: "🏊‍♂️ Swim out to save them", effects: { strength: 40, health: -80 }, death: "accident" },
                    { text: "🆘 Get a lifeguard", effects: { intelligence: 25, happiness: 10 } },
                    { text: "😰 Panic and run away", effects: { happiness: -20, health: -10 } }
                ]
            },
            14: {
                story: "🌙 You're walking home late at night through a dark alley. Suddenly, you hear footsteps behind you...",
                choices: [
                    { text: "🏃‍♂️ Run as fast as you can", effects: { strength: 30, health: -10 } },
                    { text: "😱 Hide and stay quiet", effects: { intelligence: 20, health: -5 } },
                    { text: "❓ Turn around to see who it is", effects: { health: -100 }, death: "mysterious" }
                ]
            },
            15: {
                story: "🎢 You're at an amusement park. The roller coaster looks dangerous but exciting!",
                choices: [
                    { text: "🎢 Ride the dangerous coaster!", effects: { happiness: 30, health: -100 }, death: "accident" },
                    { text: "🎡 Choose a safer ride", effects: { happiness: 15, health: 10 } },
                    { text: "🍿 Just watch and eat snacks", effects: { happiness: 10, health: 5 } }
                ]
            },
            16: {
                story: "🏔️ You're hiking and see a beautiful but dangerous cliff. The view would be amazing...",
                choices: [
                    { text: "📸 Get closer for the perfect photo", effects: { happiness: 20, health: -100 }, death: "accident" },
                    { text: "👀 Admire from a safe distance", effects: { happiness: 15, health: 10 } },
                    { text: "🚶‍♂️ Turn back to safety", effects: { health: 20, intelligence: 10 } }
                ]
            },
            17: {
                story: "🔥 There's a fire in your building! You can hear people trapped inside. What do you do?",
                choices: [
                    { text: "🚒 Run in to save them!", effects: { strength: 50, health: -100 }, death: "hero_death" },
                    { text: "📞 Call the fire department", effects: { intelligence: 25, happiness: 5 } },
                    { text: "🏃‍♂️ Get out and stay safe", effects: { health: 20, happiness: -15 } }
                ]
            },
            18: {
                story: "🌪️ A tornado is approaching! You have to make a quick decision about where to take shelter.",
                choices: [
                    { text: "🏠 Stay in your house", effects: { health: -100 }, death: "accident" },
                    { text: "🏢 Go to the basement", effects: { health: 30, intelligence: 20 } },
                    { text: "🚗 Try to drive away", effects: { health: -50, strength: 20 } }
                ]
            },
            19: {
                story: "🦈 You're swimming in the ocean when you see a shark fin nearby. What's your reaction?",
                choices: [
                    { text: "🏊‍♂️ Swim toward it to investigate", effects: { strength: 30, health: -100 }, death: "accident" },
                    { text: "🏃‍♂️ Swim back to shore quickly", effects: { strength: 25, health: 10 } },
                    { text: "😱 Float and stay very still", effects: { intelligence: 20, health: 5 } }
                ]
            },
            20: {
                story: "👴 You've lived a long life. As you grow older, how do you want to spend your final years?",
                choices: [
                    { text: "🏠 Stay home and rest peacefully", effects: { health: -100 }, death: "old_age" },
                    { text: "🌍 Travel and have adventures", effects: { happiness: 30, health: -20 } },
                    { text: "📚 Share your wisdom with others", effects: { intelligence: 20, happiness: 25 } }
                ]
            }
        };

        // Endings based on life path
        const endings = {
            artist: {
                title: "🎨 The Creative Soul",
                description: "You became a famous artist! Your creativity touched millions of lives. You lived a colorful, expressive life filled with beauty and imagination."
            },
            scientist: {
                title: "🔬 The Brilliant Mind",
                description: "You became a groundbreaking scientist! Your discoveries changed the world. You lived a life of curiosity, learning, and innovation."
            },
            athlete: {
                title: "🏆 The Champion",
                description: "You became an Olympic champion! Your determination and strength inspired people worldwide. You lived a life of discipline, achievement, and glory."
            },
            balanced: {
                title: "⚖️ The Well-Rounded Life",
                description: "You lived a balanced, happy life! You found joy in many things and touched many lives. You were loved by family and friends."
            },
            introvert: {
                title: "🤔 The Thoughtful Soul",
                description: "You became a wise philosopher! Your deep thinking and quiet wisdom helped others understand life better. You lived a peaceful, meaningful life."
            },
            adventurer: {
                title: "🗺️ The Explorer",
                description: "You became a famous explorer! You traveled the world, discovered new places, and had amazing adventures. You lived a life of excitement and discovery."
            },
            // Death endings
            early_death: {
                title: "💀 Tragic Early End",
                description: "Your life was cut short by tragedy. You left this world too soon, but your memory lives on in the hearts of those who loved you."
            },
            accident: {
                title: "🚗 Fatal Accident",
                description: "A terrible accident ended your life unexpectedly. Your family and friends were devastated by the sudden loss."
            },
            illness: {
                title: "🏥 Lost to Illness",
                description: "A serious illness took your life. You fought bravely, but the disease was too strong. You're remembered for your courage."
            },
            old_age: {
                title: "👴 Peaceful Passing",
                description: "You lived a long, full life and passed away peacefully in your sleep. You left behind a legacy of wisdom and love."
            },
            hero_death: {
                title: "🦸‍♂️ Hero's Sacrifice",
                description: "You died saving others. Your brave actions cost you your life, but you became a hero. Your sacrifice will never be forgotten."
            },
            mysterious: {
                title: "❓ Mysterious Disappearance",
                description: "You vanished without a trace. No one knows what happened to you. Your disappearance remains one of life's great mysteries."
            }
        };

        function startGame() {
            showScreen('gender-screen');
        }

        function selectGender(gender) {
            gameState.gender = gender;
            
            document.querySelectorAll('.gender-btn').forEach(btn => btn.classList.remove('selected'));
            event.target.classList.add('selected');
            
            setTimeout(() => {
                showScreen('name-screen');
                populateNameSuggestions();
            }, 500);
        }

        function populateNameSuggestions() {
            const suggestionsDiv = document.getElementById('name-suggestions');
            suggestionsDiv.innerHTML = '';
            
            let names = [];
            if (gameState.gender === 'boy') {
                names = boyNames;
            } else if (gameState.gender === 'girl') {
                names = girlNames;
            } else {
                names = neutralNames;
            }
            
            names = names.concat(neutralNames.slice(0, 5));
            
            names.forEach(name => {
                const nameBtn = document.createElement('div');
                nameBtn.className = 'name-suggestion';
                nameBtn.textContent = name;
                nameBtn.onclick = () => {
                    document.getElementById('name-input').value = name;
                };
                suggestionsDiv.appendChild(nameBtn);
            });
        }

        function confirmName() {
            const nameInput = document.getElementById('name-input');
            const name = nameInput.value.trim();
            
            if (name.length < 2) {
                alert('Please enter a name (at least 2 characters)!');
                return;
            }
            
            gameState.name = name;
            showScreen('life-screen');
            startLifeJourney();
        }

        function showScreen(screenId) {
            document.querySelectorAll('.screen').forEach(screen => screen.classList.remove('active'));
            document.getElementById(screenId).classList.add('active');
        }

        function startLifeJourney() {
            updateCharacterDisplay();
            presentChoice();
        }

        function presentChoice() {
            const scenario = lifeScenarios[gameState.age];
            if (!scenario) {
                endGame();
                return;
            }

            document.getElementById('story-text').textContent = scenario.story;
            
            const choicesContainer = document.getElementById('choices-container');
            choicesContainer.innerHTML = '';
            
            scenario.choices.forEach((choice, index) => {
                const choiceBtn = document.createElement('button');
                choiceBtn.className = 'choice-btn';
                choiceBtn.textContent = choice.text;
                choiceBtn.onclick = () => makeChoice(choice, index);
                choicesContainer.appendChild(choiceBtn);
            });
        }

        function makeChoice(choice, choiceIndex) {
            // Apply effects
            if (choice.effects.health) gameState.health += choice.effects.health;
            if (choice.effects.happiness) gameState.happiness += choice.effects.happiness;
            if (choice.effects.intelligence) gameState.intelligence += choice.effects.intelligence;
            if (choice.effects.strength) gameState.strength += choice.effects.strength;
            
            // Keep stats in bounds
            gameState.health = Math.max(0, Math.min(100, gameState.health));
            gameState.happiness = Math.max(0, Math.min(100, gameState.happiness));
            gameState.intelligence = Math.max(0, Math.min(100, gameState.intelligence));
            gameState.strength = Math.max(0, Math.min(100, gameState.strength));
            
            // Record choice
            gameState.choices.push({
                age: gameState.age,
                choice: choice.text,
                effects: choice.effects,
                death: choice.death
            });
            
            // Add to life events
            addLifeEvent(`Age ${gameState.age}: ${choice.text}`);
            
            // Check for death
            if (choice.death) {
                gameState.deathType = choice.death;
                setTimeout(() => {
                    endGame();
                }, 2000);
                return;
            }
            
            // Check if health is too low (early death)
            if (gameState.health <= 0) {
                gameState.deathType = "early_death";
                setTimeout(() => {
                    endGame();
                }, 2000);
                return;
            }
            
            // Age up
            gameState.age++;
            
            updateCharacterDisplay();
            
            // Present next choice or end game
            setTimeout(() => {
                if (gameState.age <= 20) {
                    presentChoice();
                } else {
                    endGame();
                }
            }, 1000);
        }

        function updateCharacterDisplay() {
            document.getElementById('character-name').textContent = gameState.name;
            document.getElementById('character-age').textContent = `Age: ${gameState.age}`;
            
            const canvas = document.getElementById('character-canvas');
            const ctx = canvas.getContext('2d');
            
            // Clear canvas
            ctx.clearRect(0, 0, 240, 240);
            
            // Add sparkle effect for new age
            if (gameState.age > 0) {
                createSparkles();
            }
            
            // Draw character based on age
            if (gameState.deathType) {
                drawSkull(ctx);
            } else if (gameState.age <= 2) {
                drawBaby(ctx);
            } else if (gameState.age <= 8) {
                drawChild(ctx);
            } else if (gameState.age <= 16) {
                drawTeenager(ctx);
            } else if (gameState.age <= 30) {
                drawYoungAdult(ctx);
            } else if (gameState.age <= 50) {
                drawAdult(ctx);
            } else if (gameState.age <= 70) {
                drawMiddleAged(ctx);
            } else {
                drawElderly(ctx);
            }
            
            document.getElementById('health-bar').style.width = gameState.health + '%';
            document.getElementById('happiness-bar').style.width = gameState.happiness + '%';
            document.getElementById('intelligence-bar').style.width = gameState.intelligence + '%';
            document.getElementById('strength-bar').style.width = gameState.strength + '%';
        }

        function drawPixel(ctx, x, y, color) {
            ctx.fillStyle = color;
            ctx.fillRect(x * 5, y * 5, 5, 5);
        }

        function drawPixelLarge(ctx, x, y, color) {
            ctx.fillStyle = color;
            ctx.fillRect(x * 5, y * 5, 10, 10);
        }

        function drawGradient(ctx, x, y, w, h, color1, color2) {
            const gradient = ctx.createLinearGradient(x * 5, y * 5, (x + w) * 5, (y + h) * 5);
            gradient.addColorStop(0, color1);
            gradient.addColorStop(1, color2);
            ctx.fillStyle = gradient;
            ctx.fillRect(x * 5, y * 5, w * 5, h * 5);
        }

        function drawRadialGradient(ctx, x, y, radius, color1, color2) {
            const gradient = ctx.createRadialGradient(x * 5, y * 5, 0, x * 5, y * 5, radius * 5);
            gradient.addColorStop(0, color1);
            gradient.addColorStop(1, color2);
            ctx.fillStyle = gradient;
            ctx.fillRect((x - radius) * 5, (y - radius) * 5, radius * 10, radius * 10);
        }

        function createSparkles() {
            const container = document.getElementById('particle-container');
            container.innerHTML = '';
            
            for (let i = 0; i < 8; i++) {
                const sparkle = document.createElement('div');
                sparkle.style.position = 'absolute';
                sparkle.style.width = '4px';
                sparkle.style.height = '4px';
                sparkle.style.background = '#fff';
                sparkle.style.borderRadius = '50%';
                sparkle.style.boxShadow = '0 0 8px #fff, 0 0 16px #fff';
                sparkle.style.left = Math.random() * 200 + 20 + 'px';
                sparkle.style.top = Math.random() * 200 + 20 + 'px';
                sparkle.style.animation = `sparkle 2s ease-out forwards`;
                container.appendChild(sparkle);
            }
            
            // Remove sparkles after animation
            setTimeout(() => {
                container.innerHTML = '';
            }, 2000);
        }

        function drawBaby(ctx) {
            // Face with advanced shading
            for (let y = 12; y < 28; y++) {
                for (let x = 12; x < 32; x++) {
                    let color = '#ffdbac';
                    if (x < 18) color = '#f4c088'; // Left shadow
                    if (x > 26) color = '#f4c088'; // Right shadow
                    if (y < 18) color = '#f4c088'; // Top shadow
                    if (x < 16 && y < 20) color = '#e6b17a'; // Deep shadow
                    if (x > 28 && y < 20) color = '#e6b17a'; // Deep shadow
                    drawPixel(ctx, x, y, color);
                }
            }
            
            // Cheeks with gradient
            drawGradient(ctx, 13, 22, 2, 2, '#ffb3ba', '#ff9ba3');
            drawGradient(ctx, 29, 22, 2, 2, '#ffb3ba', '#ff9ba3');
            
            // Eyes with detailed highlights
            drawPixel(ctx, 17, 20, '#000');
            drawPixel(ctx, 27, 20, '#000');
            drawPixel(ctx, 18, 19, '#fff'); // Eye highlight
            drawPixel(ctx, 28, 19, '#fff'); // Eye highlight
            drawPixel(ctx, 17, 21, '#333'); // Eye depth
            drawPixel(ctx, 27, 21, '#333'); // Eye depth
            
            // Large mouth with 3D effect
            for (let y = 26; y < 30; y++) {
                for (let x = 18; x < 26; x++) {
                    let color = '#ff6b9d';
                    if (y === 29) color = '#e55a8a'; // Darker bottom
                    if (y === 28) color = '#ff8ab4'; // Middle tone
                    if (x < 20 || x > 24) color = '#ff8ab4'; // Sides
                    drawPixel(ctx, x, y, color);
                }
            }
            
            // Nose with shading
            drawPixel(ctx, 22, 22, '#f4c088');
            drawPixel(ctx, 22, 23, '#e6b17a');
            
            // Eyebrows
            drawPixel(ctx, 16, 18, '#8b4513');
            drawPixel(ctx, 26, 18, '#8b4513');
            
            // Outline with thickness and gradient
            for (let x = 12; x < 32; x++) {
                drawPixel(ctx, x, 12, '#000');
                drawPixel(ctx, x, 27, '#000');
            }
            for (let y = 12; y < 28; y++) {
                drawPixel(ctx, 12, y, '#000');
                drawPixel(ctx, 31, y, '#000');
            }
        }

        function drawChild(ctx) {
            // Hair with advanced texture and highlights
            for (let y = 10; y < 16; y++) {
                for (let x = 11; x < 33; x++) {
                    let color = '#8b4513';
                    if (y === 10) color = '#a0522d'; // Lighter top
                    if (y === 11) color = '#9b5a2d'; // Second layer
                    if (x % 3 === 0) color = '#654321'; // Texture pattern
                    if (x % 4 === 0) color = '#a0522d'; // Highlight pattern
                    drawPixel(ctx, x, y, color);
                }
            }
            
            // Face with advanced shading
            for (let y = 16; y < 32; y++) {
                for (let x = 12; x < 32; x++) {
                    let color = '#ffdbac';
                    if (x < 18) color = '#f4c088'; // Left shadow
                    if (x > 26) color = '#f4c088'; // Right shadow
                    if (y < 20) color = '#f4c088'; // Top shadow
                    if (x < 16 && y < 22) color = '#e6b17a'; // Deep shadow
                    if (x > 28 && y < 22) color = '#e6b17a'; // Deep shadow
                    drawPixel(ctx, x, y, color);
                }
            }
            
            // Cheeks with gradient
            drawGradient(ctx, 13, 24, 2, 2, '#ffb3ba', '#ff9ba3');
            drawGradient(ctx, 29, 24, 2, 2, '#ffb3ba', '#ff9ba3');
            
            // Eyes with detailed highlights
            drawPixel(ctx, 17, 22, '#000');
            drawPixel(ctx, 27, 22, '#000');
            drawPixel(ctx, 18, 21, '#fff'); // Eye highlight
            drawPixel(ctx, 28, 21, '#fff'); // Eye highlight
            drawPixel(ctx, 17, 23, '#333'); // Eye depth
            drawPixel(ctx, 27, 23, '#333'); // Eye depth
            
            // Nose with advanced shading
            drawPixel(ctx, 22, 24, '#f4c088');
            drawPixel(ctx, 22, 25, '#e6b17a');
            drawPixel(ctx, 22, 26, '#d4a574');
            
            // Small mouth with 3D effect
            for (let y = 28; y < 30; y++) {
                for (let x = 18; x < 26; x++) {
                    let color = '#ff6b9d';
                    if (y === 29) color = '#e55a8a'; // Darker bottom
                    if (y === 28) color = '#ff8ab4'; // Middle tone
                    if (x < 20 || x > 24) color = '#ff8ab4'; // Sides
                    drawPixel(ctx, x, y, color);
                }
            }
            
            // Eyebrows
            drawPixel(ctx, 16, 20, '#8b4513');
            drawPixel(ctx, 26, 20, '#8b4513');
            
            // Outline with thickness
            for (let x = 12; x < 32; x++) {
                drawPixel(ctx, x, 16, '#000');
                drawPixel(ctx, x, 31, '#000');
            }
            for (let y = 16; y < 32; y++) {
                drawPixel(ctx, 12, y, '#000');
                drawPixel(ctx, 31, y, '#000');
            }
        }

        function drawTeenager(ctx) {
            // Hair
            for (let y = 6; y < 10; y++) {
                for (let x = 7; x < 23; x++) {
                    drawPixel(ctx, x, y, '#8b4513');
                }
            }
            
            // Face
            for (let y = 10; y < 20; y++) {
                for (let x = 8; x < 22; x++) {
                    drawPixel(ctx, x, y, '#ffdbac');
                }
            }
            
            // Eyes
            drawPixel(ctx, 11, 14, '#000');
            drawPixel(ctx, 19, 14, '#000');
            
            // Nose
            drawPixel(ctx, 15, 16, '#000');
            
            // Mouth
            for (let y = 18; y < 19; y++) {
                for (let x = 12; x < 18; x++) {
                    drawPixel(ctx, x, y, '#ff6b9d');
                }
            }
            
            // Outline
            for (let x = 8; x < 22; x++) {
                drawPixel(ctx, x, 10, '#000');
                drawPixel(ctx, x, 19, '#000');
            }
            for (let y = 10; y < 20; y++) {
                drawPixel(ctx, 8, y, '#000');
                drawPixel(ctx, 21, y, '#000');
            }
        }

        function drawYoungAdult(ctx) {
            // Hair
            for (let y = 5; y < 11; y++) {
                for (let x = 6; x < 24; x++) {
                    drawPixel(ctx, x, y, '#8b4513');
                }
            }
            
            // Face
            for (let y = 11; y < 21; y++) {
                for (let x = 8; x < 22; x++) {
                    drawPixel(ctx, x, y, '#ffdbac');
                }
            }
            
            // Eyes
            drawPixel(ctx, 11, 15, '#000');
            drawPixel(ctx, 19, 15, '#000');
            
            // Nose
            drawPixel(ctx, 15, 17, '#000');
            
            // Mouth
            for (let y = 19; y < 20; y++) {
                for (let x = 12; x < 18; x++) {
                    drawPixel(ctx, x, y, '#ff6b9d');
                }
            }
            
            // Outline
            for (let x = 8; x < 22; x++) {
                drawPixel(ctx, x, 11, '#000');
                drawPixel(ctx, x, 20, '#000');
            }
            for (let y = 11; y < 21; y++) {
                drawPixel(ctx, 8, y, '#000');
                drawPixel(ctx, 21, y, '#000');
            }
        }

        function drawAdult(ctx) {
            // Hair
            for (let y = 5; y < 11; y++) {
                for (let x = 6; x < 24; x++) {
                    drawPixel(ctx, x, y, '#8b4513');
                }
            }
            
            // Face
            for (let y = 11; y < 21; y++) {
                for (let x = 8; x < 22; x++) {
                    drawPixel(ctx, x, y, '#ffdbac');
                }
            }
            
            // Eyes
            drawPixel(ctx, 11, 15, '#000');
            drawPixel(ctx, 19, 15, '#000');
            
            // Nose
            drawPixel(ctx, 15, 17, '#000');
            
            // Mouth
            for (let y = 19; y < 20; y++) {
                for (let x = 12; x < 18; x++) {
                    drawPixel(ctx, x, y, '#ff6b9d');
                }
            }
            
            // Outline
            for (let x = 8; x < 22; x++) {
                drawPixel(ctx, x, 11, '#000');
                drawPixel(ctx, x, 20, '#000');
            }
            for (let y = 11; y < 21; y++) {
                drawPixel(ctx, 8, y, '#000');
                drawPixel(ctx, 21, y, '#000');
            }
        }

        function drawMiddleAged(ctx) {
            // Gray hair
            for (let y = 5; y < 11; y++) {
                for (let x = 6; x < 24; x++) {
                    drawPixel(ctx, x, y, '#95a5a6');
                }
            }
            
            // Face
            for (let y = 11; y < 21; y++) {
                for (let x = 8; x < 22; x++) {
                    drawPixel(ctx, x, y, '#ffdbac');
                }
            }
            
            // Eyes
            drawPixel(ctx, 11, 15, '#000');
            drawPixel(ctx, 19, 15, '#000');
            
            // Nose
            drawPixel(ctx, 15, 17, '#000');
            
            // Mouth
            for (let y = 19; y < 20; y++) {
                for (let x = 12; x < 18; x++) {
                    drawPixel(ctx, x, y, '#ff6b9d');
                }
            }
            
            // Outline
            for (let x = 8; x < 22; x++) {
                drawPixel(ctx, x, 11, '#000');
                drawPixel(ctx, x, 20, '#000');
            }
            for (let y = 11; y < 21; y++) {
                drawPixel(ctx, 8, y, '#000');
                drawPixel(ctx, 21, y, '#000');
            }
        }

        function drawElderly(ctx) {
            // White hair
            for (let y = 5; y < 11; y++) {
                for (let x = 6; x < 24; x++) {
                    drawPixel(ctx, x, y, '#ecf0f1');
                }
            }
            
            // Face
            for (let y = 11; y < 21; y++) {
                for (let x = 8; x < 22; x++) {
                    drawPixel(ctx, x, y, '#ffdbac');
                }
            }
            
            // Eyes
            drawPixel(ctx, 11, 15, '#000');
            drawPixel(ctx, 19, 15, '#000');
            
            // Nose
            drawPixel(ctx, 15, 17, '#000');
            
            // Small mouth
            for (let y = 19; y < 20; y++) {
                for (let x = 13; x < 17; x++) {
                    drawPixel(ctx, x, y, '#ff6b9d');
                }
            }
            
            // Outline
            for (let x = 8; x < 22; x++) {
                drawPixel(ctx, x, 11, '#000');
                drawPixel(ctx, x, 20, '#000');
            }
            for (let y = 11; y < 21; y++) {
                drawPixel(ctx, 8, y, '#000');
                drawPixel(ctx, 21, y, '#000');
            }
        }

        function drawSkull(ctx) {
            // Skull base with shading
            for (let y = 8; y < 22; y++) {
                for (let x = 8; x < 22; x++) {
                    let color = '#fff';
                    if (x < 12) color = '#f0f0f0'; // Left shadow
                    if (x > 18) color = '#f0f0f0'; // Right shadow
                    if (y < 12) color = '#f0f0f0'; // Top shadow
                    drawPixel(ctx, x, y, color);
                }
            }
            
            // Large eye sockets with depth
            for (let y = 12; y < 16; y++) {
                for (let x = 10; x < 14; x++) {
                    let color = '#000';
                    if (y === 15) color = '#333'; // Bottom shadow
                    drawPixel(ctx, x, y, color);
                }
                for (let x = 16; x < 20; x++) {
                    let color = '#000';
                    if (y === 15) color = '#333'; // Bottom shadow
                    drawPixel(ctx, x, y, color);
                }
            }
            
            // Nose cavity with depth
            for (let y = 16; y < 18; y++) {
                for (let x = 14; x < 16; x++) {
                    let color = '#000';
                    if (y === 17) color = '#333'; // Bottom shadow
                    drawPixel(ctx, x, y, color);
                }
            }
            
            // Teeth with individual detail
            for (let y = 20; y < 22; y++) {
                for (let x = 10; x < 20; x++) {
                    let color = '#fff';
                    if (x % 2 === 0) color = '#f0f0f0'; // Tooth separation
                    if (y === 21) color = '#e0e0e0'; // Bottom shadow
                    drawPixel(ctx, x, y, color);
                }
            }
            
            // Cracks and details
            drawPixel(ctx, 13, 10, '#ccc');
            drawPixel(ctx, 17, 10, '#ccc');
            drawPixel(ctx, 15, 19, '#ccc');
            
            // Outline with thickness
            for (let x = 8; x < 22; x++) {
                drawPixel(ctx, x, 8, '#000');
                drawPixel(ctx, x, 21, '#000');
            }
            for (let y = 8; y < 22; y++) {
                drawPixel(ctx, 8, y, '#000');
                drawPixel(ctx, 21, y, '#000');
            }
        }

        function addLifeEvent(eventText) {
            const eventsDiv = document.getElementById('life-events');
            const eventDiv = document.createElement('div');
            eventDiv.className = 'event';
            eventDiv.textContent = eventText;
            eventsDiv.appendChild(eventDiv);
            eventsDiv.scrollTop = eventsDiv.scrollHeight;
            
            // Remove the event after 3 seconds
            setTimeout(() => {
                if (eventDiv.parentNode) {
                    eventDiv.style.opacity = '0';
                    eventDiv.style.transform = 'translateX(-20px)';
                    eventDiv.style.transition = 'all 0.5s ease';
                    setTimeout(() => {
                        if (eventDiv.parentNode) {
                            eventDiv.remove();
                        }
                    }, 500);
                }
            }, 3000);
        }

        function endGame() {
            console.log('Ending game! Age:', gameState.age, 'Choices:', gameState.choices.length);
            
            let ending;
            
            // Check for death ending first
            if (gameState.deathType) {
                ending = endings[gameState.deathType];
                console.log('Death ending:', gameState.deathType);
            } else {
                ending = determineEnding();
                console.log('Selected ending:', ending.title);
            }
            
            document.getElementById('ending-title').textContent = ending.title;
            document.getElementById('ending-description').textContent = ending.description;
            
            // Create life summary
            const summary = document.getElementById('life-summary');
            const deathMessage = gameState.deathType ? `<h3>💀 Cause of Death:</h3><p>${ending.description}</p>` : '';
            
            summary.innerHTML = `
                <h3>📊 Your Final Stats:</h3>
                <p>Health: ${gameState.health}% | Happiness: ${gameState.happiness}% | Intelligence: ${gameState.intelligence}% | Strength: ${gameState.strength}%</p>
                <h3>🎯 Your Life Choices:</h3>
                ${gameState.choices.map(choice => `<p>• Age ${choice.age}: ${choice.choice}</p>`).join('')}
                ${deathMessage}
            `;
            
            showScreen('ending-screen');
        }

        function determineEnding() {
            // Determine ending based on choices and stats
            const artChoices = gameState.choices.filter(c => 
                c.choice.includes('art') || 
                c.choice.includes('draw') || 
                c.choice.includes('creative') ||
                c.choice.includes('color')
            ).length;
            
            const scienceChoices = gameState.choices.filter(c => 
                c.choice.includes('science') || 
                c.choice.includes('learn') || 
                c.choice.includes('study') || 
                c.choice.includes('code') ||
                c.choice.includes('invent') ||
                c.choice.includes('space')
            ).length;
            
            const sportsChoices = gameState.choices.filter(c => 
                c.choice.includes('sport') || 
                c.choice.includes('run') || 
                c.choice.includes('active') || 
                c.choice.includes('swim') ||
                c.choice.includes('athlete') ||
                c.choice.includes('champion')
            ).length;
            
            const socialChoices = gameState.choices.filter(c => 
                c.choice.includes('friend') || 
                c.choice.includes('party') || 
                c.choice.includes('people') ||
                c.choice.includes('famous')
            ).length;
            
            const quietChoices = gameState.choices.filter(c => 
                c.choice.includes('quiet') || 
                c.choice.includes('alone') || 
                c.choice.includes('observe') ||
                c.choice.includes('peaceful')
            ).length;
            
            console.log('Ending analysis:', {
                artChoices,
                scienceChoices,
                sportsChoices,
                socialChoices,
                quietChoices,
                totalChoices: gameState.choices.length
            });
            
            if (artChoices >= 2) return endings.artist;
            if (scienceChoices >= 2) return endings.scientist;
            if (sportsChoices >= 2) return endings.athlete;
            if (quietChoices >= 2) return endings.introvert;
            if (socialChoices >= 2) return endings.adventurer;
            
            return endings.balanced;
        }

        function restartGame() {
            gameState = {
                gender: null,
                name: '',
                age: 0,
                health: 100,
                happiness: 100,
                intelligence: 50,
                strength: 30,
                lifePath: [],
                choices: [],
                deathType: null
            };
            showScreen('welcome-screen');
        }

        // Allow Enter key to confirm name
        document.getElementById('name-input').addEventListener('keypress', function(e) {
            if (e.key === 'Enter') {
                confirmName();
            }
        });
    </script>
</body>
</html>
