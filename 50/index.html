<!DOCTYPE html>
<html lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1.0">
	<title>50 Balls - Split on Touch</title>
	<style>
		* {
			margin: 0;
			padding: 0;
			box-sizing: border-box;
		}

		body {
			background: linear-gradient(135deg, #1e3c72 0%, #2a5298 100%);
			min-height: 100vh;
			display: flex;
			justify-content: center;
			align-items: center;
			font-family: Arial, sans-serif;
		}

		.container {
			text-align: center;
		}

		h1 {
			color: white;
			margin-bottom: 20px;
			font-size: 2.5em;
			text-shadow: 2px 2px 4px rgba(0,0,0,0.3);
		}

		canvas {
			background: #0a1929;
			border-radius: 10px;
			box-shadow: 0 10px 40px rgba(0,0,0,0.5);
		}

		.info {
			color: white;
			margin-top: 20px;
			font-size: 1.2em;
		}
	</style>
</head>
<body>
	<div class="container">
		<h1>⚡ 50 Balls ⚡</h1>
		<canvas id="canvas"></canvas>
		<div class="info">
			<p>Balls: <span id="ballCount">50</span></p>
			<p>When balls touch, they split into two smaller pieces!</p>
		</div>
	</div>

	<script>
		// Bo wants: 50 balls in a circle, when they touch they split into two smaller pieces of the same size
		const canvas = document.getElementById('canvas');
		const ctx = canvas.getContext('2d');
		
		const size = Math.min(window.innerWidth - 40, window.innerHeight - 200, 800);
		canvas.width = size;
		canvas.height = size;

		const centerX = canvas.width / 2;
		const centerY = canvas.height / 2;
		const radius = size / 2 - 20;
		const minRadius = 3; // Minimum size before balls stop splitting

		let balls = [];

		class Ball {
			constructor(x, y, ballRadius = 8, vx = 0, vy = 0) {
				this.x = x;
				this.y = y;
				this.radius = ballRadius;
				this.vx = vx || (Math.random() - 0.5) * 4;
				this.vy = vy || (Math.random() - 0.5) * 4;
				this.color = `hsl(${Math.random() * 360}, 70%, 60%)`;
			}

			draw() {
				ctx.beginPath();
				ctx.arc(this.x, this.y, this.radius, 0, Math.PI * 2);
				ctx.fillStyle = this.color;
				ctx.fill();
				ctx.strokeStyle = 'rgba(255,255,255,0.3)';
				ctx.lineWidth = 1;
				ctx.stroke();
			}
		}

		// Initialize with 50 balls in a circle
		function init() {
			balls = [];
			for (let i = 0; i < 50; i++) {
				const angle = (i / 50) * Math.PI * 2;
				const distance = radius * 0.6;
				const x = centerX + Math.cos(angle) * distance;
				const y = centerY + Math.sin(angle) * distance;
				balls.push(new Ball(x, y));
			}
		}

		function update() {
			// Update ball positions
			balls.forEach(ball => {
				ball.x += ball.vx;
				ball.y += ball.vy;

				// Bounce off circle walls
				const dx = ball.x - centerX;
				const dy = ball.y - centerY;
				const distance = Math.sqrt(dx * dx + dy * dy);
				if (distance + ball.radius >= radius) {
					const nx = dx / distance;
					const ny = dy / distance;
					const dot = ball.vx * nx + ball.vy * ny;
					ball.vx -= 2 * dot * nx;
					ball.vy -= 2 * dot * ny;
					ball.x = centerX + nx * (radius - ball.radius);
					ball.y = centerY + ny * (radius - ball.radius);
				}
			});

			// Check for collisions
			const toRemove = new Set();
			const toAdd = [];

			for (let i = 0; i < balls.length; i++) {
				if (toRemove.has(i)) continue;
				for (let j = i + 1; j < balls.length; j++) {
					if (toRemove.has(j)) continue;
					
					const ball1 = balls[i];
					const ball2 = balls[j];
					const dx = ball2.x - ball1.x;
					const dy = ball2.y - ball1.y;
					const distance = Math.sqrt(dx * dx + dy * dy);
					
					if (distance < ball1.radius + ball2.radius) {
						// Balls are touching - split them!
						toRemove.add(i);
						toRemove.add(j);

						// Only split if balls are big enough
						if (ball1.radius >= minRadius && ball2.radius >= minRadius) {
							// All new balls should be the same size
							const newRadius = Math.min(ball1.radius, ball2.radius) * 0.7;
							
							// Calculate direction perpendicular to collision
							const nx = dx / distance;
							const ny = dy / distance;
							const perpX = -ny;
							const perpY = nx;
							
							const speed = 2;
							
							// Ball1 splits into two pieces
							toAdd.push(new Ball(ball1.x - perpX * newRadius, ball1.y - perpY * newRadius, newRadius, -perpX * speed, -perpY * speed));
							toAdd.push(new Ball(ball1.x + perpX * newRadius, ball1.y + perpY * newRadius, newRadius, perpX * speed, perpY * speed));
							
							// Ball2 splits into two pieces (same size)
							toAdd.push(new Ball(ball2.x - perpX * newRadius, ball2.y - perpY * newRadius, newRadius, -perpX * speed, -perpY * speed));
							toAdd.push(new Ball(ball2.x + perpX * newRadius, ball2.y + perpY * newRadius, newRadius, perpX * speed, perpY * speed));
						}
						break;
					}
				}
			}

			// Remove collided balls
			const sortedIndices = Array.from(toRemove).sort((a, b) => b - a);
			sortedIndices.forEach(idx => balls.splice(idx, 1));

			// Add new split balls
			toAdd.forEach(ball => balls.push(ball));
		}

		function draw() {
			ctx.clearRect(0, 0, canvas.width, canvas.height);
			
			// Draw circle boundary
			ctx.beginPath();
			ctx.arc(centerX, centerY, radius, 0, Math.PI * 2);
			ctx.strokeStyle = 'rgba(255,255,255,0.5)';
			ctx.lineWidth = 3;
			ctx.stroke();

			// Draw all balls
			balls.forEach(ball => ball.draw());

			// Update ball count
			document.getElementById('ballCount').textContent = balls.length;
		}

		function animate() {
			update();
			draw();
			requestAnimationFrame(animate);
		}

		init();
		animate();
	</script>
</body>
</html>

