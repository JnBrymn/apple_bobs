<!DOCTYPE html>
<html lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1.0">
	<title>Fire Field</title>
	<style>
		body {
			margin: 0;
			padding: 20px;
			font-family: Arial, sans-serif;
			background: #1a1a1a;
			color: #fff;
			display: flex;
			flex-direction: column;
			align-items: center;
		}
		h1 {
			margin: 10px 0;
			color: #ff6b35;
		}
		.controls {
			display: flex;
			gap: 20px;
			margin: 20px 0;
			flex-wrap: wrap;
			justify-content: center;
		}
		.control-group {
			display: flex;
			flex-direction: column;
			align-items: center;
			gap: 5px;
		}
		label {
			font-size: 14px;
			color: #ccc;
		}
		input[type="range"] {
			width: 150px;
		}
		.value {
			font-size: 18px;
			font-weight: bold;
			color: #ff6b35;
			min-width: 50px;
			text-align: center;
		}
		button {
			padding: 10px 20px;
			font-size: 16px;
			background: #ff6b35;
			color: white;
			border: none;
			border-radius: 5px;
			cursor: pointer;
			margin: 5px;
		}
		button:hover {
			background: #ff8c5a;
		}
		button:active {
			background: #e55a2a;
		}
		#canvas {
			border: 2px solid #444;
			background: #000;
			cursor: crosshair;
		}
		.info {
			margin-top: 10px;
			font-size: 12px;
			color: #888;
			text-align: center;
		}
	</style>
</head>
<body>
	<h1>ðŸ”¥ Fire Field ðŸ”¥</h1>
	<div class="controls">
		<div class="control-group">
			<label>Tree Growth Chance</label>
			<input type="range" id="treeChance" min="0" max="100" value="5">
			<div class="value" id="treeChanceValue">0.05%</div>
		</div>
		<div class="control-group">
			<label>Lightning Chance</label>
			<input type="range" id="lightningChance" min="0" max="100" value="1">
			<div class="value" id="lightningValue">0.00000001%</div>
		</div>
		<div class="control-group">
			<label>Simulation Speed</label>
			<input type="range" id="speed" min="1" max="100" value="5">
			<div class="value" id="speedValue">5</div>
		</div>
	</div>
	<div>
		<button id="playPause">Pause</button>
		<button id="reset">Reset</button>
		<button id="clear">Clear</button>
	</div>
	<canvas id="canvas" width="800" height="600"></canvas>
	<div class="info">
		Click on the canvas to start a fire! | Green = Tree | Red/Orange = Fire | Black = Burned
	</div>

	<script>
		// Fire Field Simulation
		// Controls: tree growth chance, lightning chance, simulation speed
		// Click to start fires, watch them spread!

		const canvas = document.getElementById('canvas');
		const ctx = canvas.getContext('2d');
		
		const CELL_SIZE = 4;
		const COLS = Math.floor(canvas.width / CELL_SIZE);
		const ROWS = Math.floor(canvas.height / CELL_SIZE);
		
		let grid = [];
		let nextGrid = [];
		let running = true;
		let frameCount = 0;
		
		// States: 0 = empty, 1 = tree, 2 = fire, 3 = burned
		function initGrid() {
			grid = [];
			nextGrid = [];
			for (let y = 0; y < ROWS; y++) {
				grid[y] = [];
				nextGrid[y] = [];
				for (let x = 0; x < COLS; x++) {
					grid[y][x] = 0;
					nextGrid[y][x] = 0;
				}
			}
		}
		
		function draw() {
			ctx.fillStyle = '#000';
			ctx.fillRect(0, 0, canvas.width, canvas.height);
			
			for (let y = 0; y < ROWS; y++) {
				for (let x = 0; x < COLS; x++) {
					const state = grid[y][x];
					const px = x * CELL_SIZE;
					const py = y * CELL_SIZE;
					
					if (state === 1) { // Tree
						ctx.fillStyle = '#228B22';
					} else if (state === 2) { // Fire
						ctx.fillStyle = `hsl(${Math.random() * 30 + 10}, 100%, ${50 + Math.random() * 20}%)`;
					} else if (state === 3) { // Burned
						ctx.fillStyle = '#1a1a1a';
					} else { // Empty
						ctx.fillStyle = '#000';
					}
					
					ctx.fillRect(px, py, CELL_SIZE, CELL_SIZE);
				}
			}
		}
		
		function countNeighbors(x, y, state) {
			let count = 0;
			for (let dy = -1; dy <= 1; dy++) {
				for (let dx = -1; dx <= 1; dx++) {
					if (dx === 0 && dy === 0) continue;
					const nx = x + dx;
					const ny = y + dy;
					if (nx >= 0 && nx < COLS && ny >= 0 && ny < ROWS) {
						if (grid[ny][nx] === state) count++;
					}
				}
			}
			return count;
		}
		
		function update() {
			const treeChance = parseFloat(document.getElementById('treeChance').value) / 10000;
			const lightningChance = parseFloat(document.getElementById('lightningChance').value) / 100000000;
			
			// Copy current grid to next
			for (let y = 0; y < ROWS; y++) {
				for (let x = 0; x < COLS; x++) {
					nextGrid[y][x] = grid[y][x];
				}
			}
			
			// Update each cell
			for (let y = 0; y < ROWS; y++) {
				for (let x = 0; x < COLS; x++) {
					const current = grid[y][x];
					
					if (current === 0) { // Empty
						// Random tree growth
						if (Math.random() < treeChance) {
							nextGrid[y][x] = 1;
						}
					} else if (current === 1) { // Tree
						// Check if fire nearby
						const fireNeighbors = countNeighbors(x, y, 2);
						if (fireNeighbors > 0) {
							nextGrid[y][x] = 2; // Tree catches fire
						} else {
							// Random lightning strike
							if (Math.random() < lightningChance) {
								nextGrid[y][x] = 2;
							}
						}
					} else if (current === 2) { // Fire
						nextGrid[y][x] = 3; // Fire becomes burned
					} else if (current === 3) { // Burned
						// Eventually becomes empty (very slowly)
						if (Math.random() < 0.01) {
							nextGrid[y][x] = 0;
						}
					}
				}
			}
			
			// Swap grids
			const temp = grid;
			grid = nextGrid;
			nextGrid = temp;
		}
		
		function gameLoop() {
			if (running) {
				const speed = parseInt(document.getElementById('speed').value);
				frameCount++;
				
				if (frameCount % (101 - speed) === 0) {
					update();
				}
				draw();
			}
			requestAnimationFrame(gameLoop);
		}
		
		// Controls
		document.getElementById('treeChance').addEventListener('input', (e) => {
			const value = (parseFloat(e.target.value) / 10000).toFixed(6);
			document.getElementById('treeChanceValue').textContent = value + '%';
		});
		
		document.getElementById('lightningChance').addEventListener('input', (e) => {
			const value = (parseFloat(e.target.value) / 100000000).toFixed(8);
			document.getElementById('lightningValue').textContent = value + '%';
		});
		
		document.getElementById('speed').addEventListener('input', (e) => {
			document.getElementById('speedValue').textContent = e.target.value;
		});
		
		document.getElementById('playPause').addEventListener('click', () => {
			running = !running;
			document.getElementById('playPause').textContent = running ? 'Pause' : 'Play';
		});
		
		document.getElementById('reset').addEventListener('click', () => {
			initGrid();
			draw();
		});
		
		document.getElementById('clear').addEventListener('click', () => {
			initGrid();
			draw();
		});
		
		// Click to start fire
		canvas.addEventListener('click', (e) => {
			const rect = canvas.getBoundingClientRect();
			const x = Math.floor((e.clientX - rect.left) / CELL_SIZE);
			const y = Math.floor((e.clientY - rect.top) / CELL_SIZE);
			
			if (x >= 0 && x < COLS && y >= 0 && y < ROWS) {
				if (grid[y][x] === 1) { // Only light trees on fire
					grid[y][x] = 2;
				}
			}
		});
		
		// Initialize
		initGrid();
		draw();
		gameLoop();
	</script>
</body>
</html>
